<ion-header>
  <ion-toolbar>
    <ion-title>Produtos</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="products-content">
  @if (loading) {
  <div class="ion-text-center ion-padding">
    <ion-spinner></ion-spinner>
    <p>Carregando produtos...</p>
  </div>
  } @if (error) {
  <div class="ion-text-center ion-padding ion-color-danger">
    <p>{{ error }}</p>
  </div>
  } @if (products.length > 0) {
  <div class="ion-padding">
    <div class="grid">
      <ion-card
        *appLoopOf="products; let product = $implicit"
        class="product-card"
        appHighlightCard="#e0f7ff"
      > 
        <img [src]="product.image" [alt]="product.title" loading="lazy" />
        <ion-card-header>
          <ion-card-title>{{ product.title }}</ion-card-title>
          <ion-card-subtitle>{{ product.category }}</ion-card-subtitle>
        </ion-card-header>
        <ion-card-content [appPriceColor]="product.price" color="primary">
          <p class="price">R$ {{ product.price | number: '1.2-2' }}</p>
          <p class = 'rating'>{{ product.rating.rate | ratingStars }}</p>
          <ion-button color="primary" [routerLink]="['/product', product.id]">
            Ver Detalhes
          </ion-button>
        </ion-card-content>
      </ion-card>
    </div>
  </div>
  } @if (!loading && products.length === 0) {
  <div class="ion-text-center ion-padding">
    <p>Nenhum produto encontrado.</p>
  </div>
  }
</ion-content>
